<html>
<head>
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/white.css">
    <link rel="stylesheet" href="lib/css/xcode.css">
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section class="technotrack-title" 
            data-background="css/theme/images/technotrack/titlebg.jpg"
            data-background-size="contain">
            <div class="subtitle">
                <p>Лекция №9</p>
            </div>
            <h1>Сторонние библиотеки</h1>
            <div class="attribution">
                <p>Николай Морев</p>
            </div>
        </section>
        <section class="dark-background"
            data-markdown
            data-background="images/vhs-glitch.jpg">
            <script type="text/template">
            ## Не забудьте отметить свое посещение*

            \* Не влияет на оценку

            </script>
        </section>
        <section data-markdown><script type="text/template">
            ## На прошлом занятии

            * Хранение данных

            Note:

            - Возникли ли какие-нибудь вопросы по этим темам?

        </script></section>
        <section data-markdown><script type="text/template">
            ## На этом занятии

            * Промежуточная защита
            * Сборка проекта
            * CocoaPods
            * Carthage

            Note:

            - Сразу завести будильник на перерывы

        </script></section>
        <section data-markdown><script type="text/template">
            ## Материалы

            * objc.io [Build Tools](https://www.objc.io/issues/6-build-tools/)
            * [Linking Objective-C Code](http://pewpewthespells.com/blog/objc_linker_flags.html)
            * [CocoaPods: Getting Started](https://guides.cocoapods.org/using/getting-started.html)

            Note:

            - Презентация как обычно доступна на сайте
        </script></section>
        <section data-markdown><script type="text/template">
            ## Почему стоит использовать

            * Экономия времени на написание и поддержку
            * Возможность поучаствовать в Open-Source разработке

            Note:

            - Хорошо отлаженный и протестированный множеством пользователей в течение долгого времени код
            - Прежде, чем что-либо писать, посмотрите, а не написал ли это кто-то другой

        </script></section>
        <section data-markdown><script type="text/template">
            ## Недостатки внешних зависимостей

            * Не все проекты хорошо написаны
            * Не все проекты поддерживаются автором и сообществом

        </script></section>
        <section>
            <section data-markdown><script type="text/template">
                ## Этапы сборки

                ![Build steps](13thirdparty/build-process.svg) <!-- .element: style="height: 70%" -->


            </script></section>
            <section data-markdown><script type="text/template">
                ## Этапы сборки

                * Препроцессор
                * Компиляция
                * Линковка
                * Создание архива
                * Криптографическая подпись

                Note:

                - Слайсы для разных архитектур - fat

            </script></section>
        </section>
        <section data-markdown><script type="text/template">
            ## Подключение к проекту

            * Добавление исходных файлов
            * Подключение подпроекта
            * Подключение статической библиотеки
            * Подключение динамической библиотеки

            Note: 

            - Показать: добавление исходников, подпроект
            - Какие проблемы могут возникнуть: no-arc, варнинги

        </script></section>
        <section data-markdown><script type="text/template">
            ## Git

            * Submodules
            * [Subtree](https://github.com/apenwarr/git-subtree/blob/master/git-subtree.txt)
            * Просто так

            Note:

            - Плюсы и минусы
            - Во многих больших компаниях все хранят в едином (монолитном) репозитории
            - Хранить исходники сторонних библиотек вместе или загружать по необходимости?
            - Скандал в npm

        </script></section>
        <section>
            <section data-markdown><script type="text/template">
                ## CocoaPods

                * Менеджер зависимостей
                * Стандарт де-факто
                * Поддержка Swift и Objective-C
                * Статическая и динамическая линковка

                Note:

                - Огромное количество библиотек
                - Демо
                - Посмотреть в документации что можно задать в Podfile

            </script></section>
            <section data-markdown><script type="text/template">
                ## Недостатки CocoaPods

                * Плохо масштабируется
                * Сам редактирует файл проекта

                Note:

                - Рассказать про наш опыт использования CocoaPods

            </script></section>
            <section data-markdown><script type="text/template">
                ## Создание пода

                [Making CocoaPods](https://guides.cocoapods.org/making/index.html)
            </script></section>
        </section>
        <section>
            <h2>Динамические библиотеки</h2>

            <ul class="plus-minus">
                <li class="plus">Меньше места при использовании расширений</li>
                <li class="plus">Можно подгружать по необходимости</li>
                <li class="plus">Возможность обновления библиотеки без перекомпиляции приложения</li>
                <li class="minus">Требуется отдельно подписывать</li>
                <li class="minus">Возможность появилась недавно</li>
            </ul>

            <aside class="notes">
                <ul>
                    <li>Баги: например, Swift пока не имеет binary compatibility, поэтому нельзя использовать фреймворки, скомпилированные на другой машине</li>
                </ul>
            </aside>
        </section>
        <section data-markdown><script type="text/template">
            ## Carthage

            * Простой, децентрализованный менеджер зависимостей
            * Только динамические библиотеки
            * Не правит файл проекта

        </script></section>
        <section data-markdown><script type="text/template">
            ## Swift Package Manager

            * Официальное решение от Apple
            * Work in progress

            Note:

            - Доступно в development snapshots свифта

        </script></section>
        <section data-markdown><script type="text/template">
            ## Обзор популярных подов

            * [Trending CocoaPods](https://trendingcocoapods.github.io/)
            * [What the pod](http://www.whatthepod.com/)

            Note:

            - [GPUImage](https://github.com/BradLarson/GPUImage)

        </script></section>
        <section data-markdown><script type="text/template">
            ## Сишные библиотеки

            * Кросс-компиляция
            * FAT статическая библиотека

            Note:

            - которые не писались изначально для Objective-C
            - Пример: ffmpeg
            - OpenCV: https://github.com/chrismarcellino/edgycamera

        </script></section>
        <section data-markdown><script type="text/template">
            ## На что обращать внимание

            * Риски
            * Активно ли ведется разработка
            * Сколько звездочек и форков
            * Просмотреть Issues

        </script></section>
        <section data-markdown><script type="text/template">
            ## Домашнее задание №10

            Подключить к проекту какую-нибудь внешнюю библиотеку через CocoaPods.

            Срок 1 неделя, оценка 4 балла
        </script></section>
        <section data-markdown><script type="text/template">
            ## Следующее занятие

            * 11 мая, 18:30
            * РК2, разбор ДЗ
        </script></section>
        <section class="dark-background"
            data-markdown
            data-background="images/apple_cat.jpg">
            <script type="text/template">
            ## Отзывы и оценки

            Спасибо за внимание!

            Николай Морев

            n.morev@corp.mail.ru
            </script>
        </section>
    </div>
</div>
<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>
<script>
Reveal.initialize({
    controls: false,
    progress: true,
    history: true,
    center: true,
    slideNumber: true,
    transition: 'slide', // none/fade/slide/convex/concave/zoom
    showNotes: false,

    // Optional reveal.js plugins
    dependencies: [
        { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: 'plugin/markdown/marked.js', condition: function() {
            return !!document.querySelector( '[data-markdown]' );
        } },
        { src: 'plugin/markdown/markdown.js', condition: function() {
            return !!document.querySelector( '[data-markdown]' );
        } },
        { src: 'plugin/highlight/highlight.js', async: true, callback: function() {
            hljs.initHighlightingOnLoad();
        } },
        { src: 'plugin/zoom-js/zoom.js', async: true },
        { src: 'plugin/notes/notes.js', async: true }
    ]
});
</script>
</body>
</html>

